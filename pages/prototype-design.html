<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Bible Verse Memorizer (No Signup)</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827ee;
      --muted:#94a3b8;
      --text:#e5e7eb;
      --accent:#38bdf8;
      --accent-2:#22c55e;
      --warn:#f59e0b;
      --danger:#ef4444;
    }
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:linear-gradient(180deg,#0b1226,#0f172a);color:var(--text)}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    h1{font-weight:800;letter-spacing:.3px;margin:0 0 12px;font-size:clamp(22px,3vw,36px)}
    p.sub{color:var(--muted);margin:.25rem 0 1rem}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:380px 1fr}}
    .card{background:var(--panel);backdrop-filter:blur(6px);border:1px solid #1f2937; padding:16px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    label{display:block;font-size:12px;color:var(--muted);margin:.25rem 0 .35rem}
    input[type=text], textarea{width:100%;background:#0b1220;border:1px solid #243244;color:var(--text);border-radius:10px;padding:10px 12px;outline:none}
    textarea{min-height:82px;resize:vertical}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    button{background:#0b1220;border:1px solid #263445;color:var(--text);padding:9px 12px;border-radius:10px;cursor:pointer}
    button.primary{background:var(--accent);color:#06111a;border-color:transparent;font-weight:700}
    button.ghost{opacity:.9}
    .tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}
    .tab{padding:8px 10px;border:1px solid #263445;border-radius:999px;background:#0b1220;color:var(--muted);cursor:pointer}
    .tab.active{background:var(--accent);color:#06111a;border-color:transparent;font-weight:700}
    .panel{border:1px dashed #334155;border-radius:12px;padding:14px;min-height:70px}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .footer{margin-top:28px;color:#7c8aa5;font-size:12px}
    .hint{font-size:12px;color:#8fa0bd}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Simple Bible Verse Memorizer</h1>
      <p class="sub">Add a verse, understand the context, then practice with first‑letters, cloze, typing, and phrase ordering. Data stays local.</p>
    </header>

    <div class="grid">
      <section class="card" id="inputCard">
        <label for="ref">Reference</label>
        <input id="ref" type="text" placeholder="e.g., Psalm 23:1" />

        <label for="verse">Verse Text</label>
        <textarea id="verse" placeholder="Type or paste the verse here"></textarea>

        <label for="context">Context</label>
        <textarea id="context" placeholder="Add notes for context"></textarea>

        <label for="paraphrase">Your paraphrase</label>
        <textarea id="paraphrase" placeholder="Write in your own words"></textarea>

        <div class="row" style="margin-top:10px">
          <button class="primary" id="saveBtn">Save / Use This Verse</button>
          <button id="sampleBtn">Load Sample</button>
          <button class="ghost" id="clearBtn">Clear</button>
        </div>
      </section>

      <section class="card">
        <div class="row">
          <div id="refBadge">—</div>
          <div class="right small muted" id="status">Nothing loaded</div>
        </div>
        <div class="tabs" id="tabs"></div>
        <div id="panelContainer"></div>
      </section>
    </div>

    <div class="footer">No signup, no tracking — just Scripture and recall.</div>
  </div>

  <script>
  const $ = sel => document.querySelector(sel);
  const stopwords = new Set('the,of,and,to,in,for,that,on,as,with,by,at,from,or,an,a,is,are,was,were,be,been,being,not,no,so,it,its,he,she,they,them,his,her,our,us,we,you,your,i,me,my,shall,will'.split(','));
  function tokenize(t){return t.match(/[\w’']+|[^\s\w]/g)||[];}
  function firstLetters(t){return tokenize(t).map(tok=>/^[\w’']+$/.test(tok)?tok[0]:tok).join('');}
  function cloze(t){return tokenize(t).map(tok=>!(/^[\w’']+$/.test(tok))?tok:(stopwords.has(tok.toLowerCase())||tok.length<=3)?tok:'____').join('');}
  function normalize(s){return (s||'').trim().replace(/[\s]+/g,' ');}
  function compareTokens(target,attempt){const tT=tokenize(target.toLowerCase()),tA=tokenize(attempt.toLowerCase());let hits=0;for(let i=0;i<Math.max(tT.length,tA.length);i++){if(tA[i]&&tT[i]&&tA[i]===tT[i])hits++;}return (hits/Math.max(1,tT.length))*100;}
  const KEY='svm.current';
  const save=v=>localStorage.setItem(KEY,JSON.stringify(v));
  const load=_=>JSON.parse(localStorage.getItem(KEY)||'null');
  const clear=_=>localStorage.removeItem(KEY);

  const MODES=[{id:'read',label:'Read & Context'},{id:'first',label:'First‑Letters'},{id:'cloze',label:'Cloze'},{id:'type',label:'Type to Recall'},{id:'order',label:'Reorder Phrases'}];

  function renderTabs(active){$('#tabs').innerHTML=MODES.map(m=>`<button class="tab ${m.id===active?'active':''}" data-id="${m.id}">${m.label}</button>`).join('');
    $('#tabs').querySelectorAll('.tab').forEach(b=>b.onclick=()=>{renderPanel(b.dataset.id);document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));b.classList.add('active');});}

  function phraseSplit(t){const parts=t.split(/(?<=[,;:\u2014\-\.])\s+/).filter(Boolean);return parts.length>1?parts:[t];}
  function renderPanel(mode){const d=load();if(!d){$('#panelContainer').innerHTML='<div class="panel muted">Load or enter a verse first.</div>';return;}
    $('#refBadge').textContent=d.ref||'—';
    if(mode==='read')$('#panelContainer').innerHTML=`<div class="panel mono">${d.text}</div>`;
    if(mode==='first')$('#panelContainer').innerHTML=`<div class="panel mono">${firstLetters(d.text)}</div>`;
    if(mode==='cloze')$('#panelContainer').innerHTML=`<div class="panel mono">${cloze(d.text)}</div>`;
    if(mode==='type')$('#panelContainer').innerHTML=`<div class="panel"><textarea id="attempt" class="mono" placeholder="Type from memory..."></textarea><button id="check">Check</button><div id="acc"></div></div>`;
    if(mode==='order'){const p=phraseSplit(d.text),s=[...p].sort(()=>Math.random()-.5);$('#panelContainer').innerHTML=`<div class="panel" id="ord"></div>`;const ord=$('#ord');s.forEach(ph=>{const e=document.createElement('div');e.textContent=ph;e.draggable=true;e.className='tab';ord.appendChild(e);});}
  }

  $('#saveBtn').onclick=()=>{const d={ref:normalize($('#ref').value),text:$('#verse').value,context:$('#context').value,paraphrase:$('#paraphrase').value};if(!d.text)return alert('Enter text');save(d);renderTabs('first');renderPanel('first');};
  $('#sampleBtn').onclick=()=>{$('#ref').value='Psalm 23:1';$('#verse').value='The LORD is my shepherd; I shall not want.';$('#context').value='David uses shepherd metaphor.';$('#paraphrase').value='God provides; I lack nothing.';};
  $('#clearBtn').onclick=()=>{if(confirm('Clear current verse?')){clear();location.reload();}};
  (function init(){renderTabs('read');const d=load();if(d){$('#ref').value=d.ref;$('#verse').value=d.text;$('#context').value=d.context;$('#paraphrase').value=d.paraphrase;renderPanel('first');}})();
  </script>
</body>
</html>
